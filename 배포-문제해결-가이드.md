# 배포 문제 해결 가이드 (paps-health)

## 현재 상황
- 프로젝트 이름: `paps-health`
- 배포 오류 발생 중

## 해결 방법

### 1. Vercel에서 Build Logs 확인

1. **Vercel 대시보드 접속**
   - https://vercel.com 접속
   - 프로젝트 `paps-health` 선택

2. **Build Logs 확인**
   - "Build Logs" 버튼 클릭
   - 오류 메시지 전체 확인
   - 특히 Prisma 관련 오류 확인

### 2. 일반적인 Prisma 오류 해결

#### 오류: P3019 (Provider not supported)

**원인**: Prisma Client가 PostgreSQL provider를 인식하지 못함

**해결 방법**:
1. Vercel → Project → Settings → Environment Variables
2. `DATABASE_URL` 확인:
   - 형식: `postgresql://user:password@host/database?sslmode=require`
   - 전체 문자열이 정확한지 확인
3. 재배포:
   - Deployments → 최신 배포 → "..." → "Redeploy"

#### 오류: Migration failed

**해결 방법**:
1. Neon 데이터베이스가 실행 중인지 확인
2. Connection String이 올바른지 확인
3. Vercel에서 "Redeploy" 클릭

### 3. 수동 재배포

1. **Vercel 대시보드**
   - 프로젝트 `paps-health` 선택
   - "Deployments" 탭 클릭

2. **재배포 실행**
   - 실패한 배포 옆의 "..." 메뉴 클릭
   - "Redeploy" 선택
   - 또는 "Deployments" → "Redeploy" 버튼 클릭

### 4. 환경 변수 재확인

1. **Vercel → Settings → Environment Variables**
2. 다음 변수 확인:
   - `DATABASE_URL`: PostgreSQL 연결 문자열
   - `OPENAI_API_KEY`: OpenAI API 키 (선택사항)

3. **변수 값 확인**
   - `DATABASE_URL`이 `postgresql://`로 시작하는지 확인
   - 전체 문자열이 복사되었는지 확인

### 5. 빌드 명령 확인

Vercel → Settings → General → Build & Development Settings

**Build Command**:
```
node scripts/prepare-schema.js && prisma generate && prisma migrate deploy && next build
```

**Install Command**:
```
npm install
```

---

## 다음 단계

1. **Build Logs 확인**
   - 정확한 오류 메시지 확인
   - 오류 메시지를 알려주시면 더 정확한 해결책을 제시할 수 있습니다

2. **재배포**
   - 변경사항이 GitHub에 푸시되었으므로 자동 재배포가 시작됩니다
   - 또는 수동으로 "Redeploy" 클릭

3. **성공 확인**
   - 배포가 성공하면 Production URL 확인
   - 웹사이트 접속 테스트

---

## 도움이 필요하신가요?

Build Logs의 전체 오류 메시지를 알려주시면 더 정확한 해결책을 제시할 수 있습니다.
