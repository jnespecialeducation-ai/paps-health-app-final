# 🚀 배포 실행 가이드 (2단계 & 3단계)

## 📋 2단계: PostgreSQL 데이터베이스 생성

### Neon 사용 (가장 추천) ⭐

1. **Neon 접속**
   - 브라우저에서 https://neon.tech 접속
   - "Sign Up" 클릭

2. **계정 생성**
   - GitHub 계정으로 가입 (가장 간단)
   - 또는 이메일로 가입

3. **프로젝트 생성**
   - 대시보드에서 "Create Project" 클릭
   - 프로젝트 이름 입력: `paps-health` (또는 원하는 이름)
   - Region 선택: `Seoul (ap-northeast-2)` 또는 가장 가까운 지역
   - PostgreSQL 버전: `15` (기본값)
   - "Create Project" 클릭

4. **Connection String 복사**
   - 프로젝트 대시보드에서 "Connection String" 섹션 찾기
   - "Copy" 버튼 클릭
   - 형식: `postgresql://user:password@host.neon.tech/database?sslmode=require`
   - ⚠️ **이 문자열을 메모장에 복사해두세요!** (나중에 사용)

5. **데이터베이스 확인**
   - "Dashboard" → "Databases"에서 데이터베이스가 생성되었는지 확인

---

## 📋 3단계: Vercel에 배포

### 1. Vercel 계정 생성

1. **Vercel 접속**
   - 브라우저에서 https://vercel.com 접속
   - "Sign Up" 클릭

2. **GitHub 연동**
   - "Continue with GitHub" 클릭
   - GitHub 계정으로 로그인
   - Vercel이 GitHub 저장소에 접근할 수 있도록 권한 승인

### 2. 프로젝트 Import

1. **새 프로젝트 생성**
   - Vercel 대시보드에서 "Add New..." → "Project" 클릭
   - 또는 "New Project" 버튼 클릭

2. **GitHub 저장소 선택**
   - GitHub 저장소 목록에서 `paps-health-app` 찾기
   - 또는 저장소 검색: `jnespecialeducation-ai/paps-health-app`
   - 저장소 옆의 "Import" 버튼 클릭

### 3. 프로젝트 설정

1. **프로젝트 이름 확인**
   - Project Name: `paps-health-app` (또는 원하는 이름)
   - Framework Preset: `Next.js` (자동 감지됨)

2. **빌드 설정 확인**
   - Root Directory: `./` (기본값)
   - Build Command: `npm run build` (자동 설정됨)
   - Output Directory: `.next` (자동 설정됨)
   - Install Command: `npm install` (자동 설정됨)

3. **환경 변수 설정** (중요!)

   "Environment Variables" 섹션을 클릭하고 다음 변수를 추가:

   **변수 1: DATABASE_URL**
   ```
   이름: DATABASE_URL
   값: (2단계에서 복사한 Neon Connection String)
   ```
   - 예시: `postgresql://user:password@ep-xxx-xxx.region.neon.tech/dbname?sslmode=require`
   - ⚠️ 전체 문자열을 정확히 복사해야 합니다!

   **변수 2: OPENAI_API_KEY** (선택사항)
   ```
   이름: OPENAI_API_KEY
   값: (OpenAI API 키 - AI 추천 기능 사용 시만)
   ```
   - AI 추천 기능을 사용하지 않으면 생략 가능

4. **환경 변수 적용 범위**
   - Production, Preview, Development 모두에 체크
   - 또는 Production만 체크해도 됨

### 4. 배포 시작

1. **배포 버튼 클릭**
   - 모든 설정 확인 후 "Deploy" 버튼 클릭

2. **배포 진행 확인**
   - 빌드 로그가 실시간으로 표시됨
   - 약 2-3분 소요
   - 진행 상황:
     - Installing dependencies...
     - Running build command...
     - Generating Prisma Client...
     - Running database migrations...
     - Building Next.js application...

3. **배포 완료**
   - "Congratulations!" 메시지 확인
   - 배포된 URL 확인 (예: `https://paps-health-app.vercel.app`)
   - "Visit" 버튼 클릭하여 웹사이트 확인

---

## ✅ 배포 확인

### 1. 웹사이트 접속 테스트

1. 배포된 URL로 접속
2. 홈페이지가 정상적으로 로드되는지 확인
3. "학생 목록" 페이지 확인

### 2. 기능 테스트

1. **학생 등록 테스트**
   - "새 학생 등록" 버튼 클릭
   - 학생 정보 입력 후 등록
   - 데이터가 저장되는지 확인

2. **측정 입력 테스트**
   - 등록한 학생 클릭
   - "새 측정 입력" 클릭
   - 측정 데이터 입력 후 저장
   - 결과 페이지 확인

3. **데이터 저장 확인**
   - 페이지를 새로고침해도 데이터가 유지되는지 확인

---

## 🆘 문제 해결

### 빌드 실패 시

1. **Vercel 대시보드 확인**
   - Deployments → 실패한 배포 클릭
   - Logs 탭에서 오류 메시지 확인

2. **일반적인 오류**
   - `DATABASE_URL` 환경 변수가 설정되지 않음
   - Connection String 형식이 잘못됨
   - Prisma 마이그레이션 실패

3. **해결 방법**
   - 환경 변수 다시 확인
   - Connection String 전체 복사 확인
   - Vercel 대시보드에서 "Redeploy" 클릭

### 데이터베이스 연결 실패 시

1. **Neon 대시보드 확인**
   - 데이터베이스가 실행 중인지 확인
   - Connection String이 올바른지 확인

2. **환경 변수 확인**
   - Vercel → Project → Settings → Environment Variables
   - `DATABASE_URL` 값 확인

---

## 🎉 완료!

배포가 완료되면:

1. **공개 URL 공유**
   - 배포된 URL을 다른 사람들과 공유
   - 예: `https://paps-health-app.vercel.app`

2. **자동 배포 설정**
   - GitHub에 코드를 푸시하면 자동으로 재배포됨
   - Vercel 대시보드에서 배포 내역 확인 가능

3. **도메인 설정** (선택사항)
   - Vercel → Project → Settings → Domains
   - 커스텀 도메인 추가 가능

---

## 📝 다음 단계

코드를 수정한 후:

```powershell
git add .
git commit -m "업데이트 내용"
git push origin main
```

Vercel이 자동으로 새 버전을 배포합니다!
